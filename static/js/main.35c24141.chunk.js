(this["webpackJsonpts-react"]=this["webpackJsonpts-react"]||[]).push([[0],{56:function(e,t,n){e.exports=n(68)},61:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),s=n.n(c),o=(n(61),n(6)),i=n(83),u=n(84),l=n(71),m=n(90),d=n(85),f=n(86),h=n(40),b=n.n(h),p=n(41),E=n.n(p),g=n(43),O=n.n(g),j=n(44),v=n.n(j),y=n(42),w=n.n(y),k=(n(26),n(31)),S=function(e){return r.a.createElement(k.a,{align:"center",color:e.isResetState?"secondary":"primary",variant:"h1"},function(e){var t=Math.floor(e/60),n=e%60,a=t.toString(),r=n.toString();return t<10&&(a="0"+a),n<10&&(r="0"+r),a+":"+r}(e.seconds))},x=n(38),W=n(39),C=new(function(){function e(){var t=this;Object(x.a)(this,e),this.host="wss://fivebomber.herokuapp.com",this.socket=new WebSocket(this.host),this.onMessages=[],this.init=function(){var e=new WebSocket(t.host);e.onopen=function(){console.log("open!!!");var n=t.socket;t.socket=e,n.onclose=function(){},n.close()},e.onmessage=function(e){console.log(e.data),t.onMessages.forEach((function(t){return t(e)}))},e.onclose=function(){console.log("closed!!!"),t.init()}},this.init(),setInterval((function(){t.init()}),2e4)}return Object(W.a)(e,[{key:"addOnMessage",value:function(e){var t=this;this.onMessages.push(e),this.socket.onmessage=function(e){t.onMessages.forEach((function(t){return t(e)}))}}},{key:"send",value:function(e){this.socket.send(e)}}]),e}()),I=Object(i.a)({redBg:{background:"red"},whiteBg:{}}),B=function(){var e=I(),t=Object(a.useState)(90),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(a.useRef)(c),h=Object(a.useState)(c),p=Object(o.a)(h,2),g=p[0],j=p[1],y=Object(a.useRef)(g),k=Object(a.useState)(0),x=Object(o.a)(k,2),W=x[0],B=x[1],T=Object(a.useRef)(W),M=Object(a.useState)(!1),R=Object(o.a)(M,2),A=R[0],D=R[1],L={color:"primary",name:"start"},N={color:"default",name:"stop"},P=Object(a.useState)({color:"primary",name:"start"}),z=Object(o.a)(P,2),J=z[0],K=z[1],V=Object(a.useState)(!0),$=Object(o.a)(V,2),q=$[0],F=$[1],G=Object(a.useState)(!0),H=Object(o.a)(G,2),U=H[0],X=H[1],Y=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/start.mp3")),Z=Object(o.a)(Y,1)[0],_=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/cannon.mp3")),ee=Object(o.a)(_,1)[0],te=Object(a.useContext)(Q),ne=Object(a.useRef)(te);Object(a.useEffect)((function(){y.current=g,0===g&&(ee.play(),window.clearInterval(T.current))}),[g]),Object(a.useEffect)((function(){ne.current=te}),[te]),Object(a.useEffect)((function(){i.current=c}),[c]),Object(a.useEffect)((function(){T.current=W}),[W]),Object(a.useEffect)((function(){C.addOnMessage((function(e){console.log("addOnMessage");var t=e.data;if(console.log(t),t.split(":")[1]!==ne.current&&(t.startsWith("timer-start")&&re(),t.startsWith("timer-stop")&&ce(),t.startsWith("timer-reset")&&oe(),t.startsWith("timer-increase")&&ie(),t.startsWith("timer-decrease")&&ue(),t.startsWith("timer-sync"))){console.log("recieve timer sync");var n=t.split(":")[2];j(parseInt(n.split("-")[0])),s(parseInt(n.split("-")[1])),"true"===n.split("-")[2]?re():(ce(),y.current===i.current?X(!0):X(!1))}}))}),[]);var ae=function(){var e=":"+y.current+"-"+i.current+"-"+A.toString();C.send("timer-sync:"+ne.current+e)},re=function(){console.log("startTimer"),window.clearInterval(T.current),B(window.setInterval(se,1e3)),y.current===i.current&&Z.play(),D(!0),K(N),F(!1),X(!1)},ce=function(){window.clearInterval(T.current),D(!1),K(L),F(!0)},se=function(){y.current>0&&j(y.current-1)},oe=function(){j(i.current),window.clearInterval(T.current),X(!0)},ie=function(){U&&(i.current>3570?s(3599):s(i.current+30)),y.current>3570?j(3599):j(y.current+30)},ue=function(){U&&(i.current<30?s(0):s(i.current-30)),y.current<30?j(0):j(y.current-30)};return r.a.createElement(u.a,{container:!0,justify:"center",spacing:2},r.a.createElement(u.a,{item:!0,xs:!0,md:5},r.a.createElement(l.a,{className:0===g?e.redBg:e.whiteBg,color:"primary",elevation:4},r.a.createElement(u.a,{container:!0},r.a.createElement(u.a,{item:!0,xs:11},r.a.createElement(m.a,{ml:"5vw"},r.a.createElement(S,{seconds:g,isResetState:U}))),r.a.createElement(u.a,{item:!0,xs:1},r.a.createElement(u.a,{container:!0},r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(m.a,{mt:1},r.a.createElement(d.a,{color:U?"secondary":"primary",edge:"start",onClick:function(){ae(),ie(),C.send("timer-increase:"+ne.current)}},r.a.createElement(b.a,null)))),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(d.a,{color:U?"secondary":"primary",edge:"start",onClick:function(){ae(),ue(),C.send("timer-decrease:"+ne.current)}},r.a.createElement(E.a,null)))))))),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(u.a,{container:!0,justify:"center",spacing:2},r.a.createElement(m.a,{mr:"1vw",mt:"3vh"},r.a.createElement(f.a,{size:"large",variant:"contained",color:J.color,startIcon:A?r.a.createElement(w.a,null):r.a.createElement(O.a,null),onClick:function(){ae(),A?(ce(),C.send("timer-stop:"+ne.current)):(re(),C.send("timer-start:"+ne.current))}},J.name)),r.a.createElement(m.a,{ml:"1vw",mt:"3vh"},r.a.createElement(f.a,{size:"large",variant:"contained",color:"secondary",startIcon:r.a.createElement(v.a,null),disabled:!q,onClick:function(){ae(),oe(),C.send("timer-reset:"+ne.current)}},"Reset")))))},T=n(45),M=n.n(T),R=n(46),A=n.n(R),D=n(47),L=n.n(D),N=function(){var e=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/correct.mp3")),t=Object(o.a)(e,1)[0],n=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/wrong.mp3")),c=Object(o.a)(n,1)[0],s=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/success.mp3")),i=Object(o.a)(s,1)[0],l=[{key:"correct",sound:t},{key:"wrong",sound:c},{key:"success",sound:i}],f=Object(a.useContext)(Q),h=Object(a.useRef)(f);Object(a.useEffect)((function(){h.current=f}),[f]),Object(a.useEffect)((function(){C.addOnMessage((function(e){var t=e.data;l.forEach((function(e){t.startsWith("sound-"+e.key)&&(t.endsWith(h.current)||e.sound.play())}))}))}));Object(a.useEffect)((function(){document.body.addEventListener("keydown",(function(e){","===e.key&&(t.play(),b()),"."===e.key&&(c.play(),p()),"/"===e.key&&(i.play(),E())}))}),[]);var b=function(){C.send("sound-correct:"+h.current)},p=function(){C.send("sound-wrong:"+h.current)},E=function(){C.send("sound-success:"+h.current)};return r.a.createElement("div",null,r.a.createElement(m.a,{mt:3},r.a.createElement(u.a,{container:!0,justify:"center"},r.a.createElement(d.a,{onClick:function(){t.play(),b()}},r.a.createElement(M.a,null)),r.a.createElement(d.a,{onClick:function(){c.play(),p()}},r.a.createElement(A.a,null)),r.a.createElement(d.a,{onClick:function(){i.play(),E()}},r.a.createElement(L.a,null)))))},P=n(49),z=n(87),J=n(88),K=n(92),V=n(89),$=Object(i.a)({chatform:{outline:"none",marginLeft:"10px",marginRight:"10px",marginTop:"10px",padding:"10px 10px 10px 5px",display:"block",height:"10px",width:"85%",border:"none",borderBottom:"1px solid #757575 ",backgroundColor:"#f4f4f4",BorderRadius:"30px"}}),q=function(){var e=$(),t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)([]),l=Object(o.a)(i,2),d=l[0],f=l[1],h=Object(a.useRef)(d),b=Object(a.useContext)(Q);Object(a.useEffect)((function(){C.addOnMessage((function(e){var t=e.data,n="";if(t.startsWith("sound-correct")&&(n="Correct!!"),t.startsWith("sound-wrong")&&(n="Wrong!!"),t.startsWith("sound-success")&&(n="Congratulations!!"),t.startsWith("timer-start")&&(n="Timer Start"),t.startsWith("timer-stop")&&(n="Timer Stop"),t.startsWith("timer-reset")&&(n="Timer Reset"),t.startsWith("timer-increase")&&(n="Timer Increase"),t.startsWith("timer-decrease")&&(n="Timer Decrease"),!t.startsWith("timer-sync")){t.startsWith("chat:")&&(n=t.split(":")[2]);var a=t.split(":")[1],r=new Date,c=0===h.current.length?0:h.current[0].id+1;f([{id:c,time:r.toLocaleString(),userId:a,msg:n}].concat(Object(P.a)(h.current)))}}))}),[]),Object(a.useEffect)((function(){h.current=d}),[d]);return r.a.createElement("div",null,r.a.createElement(u.a,{container:!0,justify:"flex-end"},r.a.createElement(u.a,{item:!0,xs:8,sm:5,md:3},r.a.createElement(z.a,{variant:"outlined"},r.a.createElement("input",{type:"text",name:"Post",className:e.chatform,onKeyDown:function(e){!function(e){var t=0===c.length;"Enter"===e.key&&e.shiftKey&&!t&&(console.log(b),C.send("chat:"+b+":"+c),s(""))}(e)},value:c,onChange:function(e){s(e.target.value)}}),r.a.createElement(J.a,null,d.map((function(e){return r.a.createElement(m.a,{mt:-1,mb:-2,key:e.id},r.a.createElement(K.a,null,r.a.createElement(V.a,{primary:e.msg,secondary:e.time+" ID:"+e.userId.slice(0,6)})))})),r.a.createElement(m.a,{mt:-1,mb:-2},r.a.createElement(K.a,null,r.a.createElement(V.a,{primary:"Press Shift+Enter"}))))))))},F=n(48),G=n.n(F),H=Object(i.a)({app:{padding:"2vh"}}),Q=Object(a.createContext)("0"),U=function(){var e=H(),t=Object(a.useState)(Math.random().toString()),n=Object(o.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){setTimeout((function(){G.a.getV18((function(e,t){s(e)}))}),500)}),[]),r.a.createElement("div",{className:e.app},r.a.createElement(Q.Provider,{value:c},r.a.createElement(B,null),r.a.createElement(N,null),r.a.createElement(q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.35c24141.chunk.js.map