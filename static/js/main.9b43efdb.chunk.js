(this["webpackJsonpts-react"]=this["webpackJsonpts-react"]||[]).push([[0],{56:function(e,t,n){e.exports=n(68)},61:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),o=n.n(r),s=(n(61),n(6)),i=n(83),u=n(84),l=n(71),m=n(90),d=n(85),f=n(86),h=n(38),b=n.n(h),E=n(39),p=n.n(E),g=n(41),j=n.n(g),v=n(42),O=n.n(v),y=n(40),w=n.n(y),k=(n(26),n(31)),S=function(e){return c.a.createElement(k.a,{align:"center",color:e.isResetState?"secondary":"primary",variant:"h1"},function(e){var t=Math.floor(e/60),n=e%60,a=t.toString(),c=n.toString();return t<10&&(a="0"+a),n<10&&(c="0"+c),a+":"+c}(e.seconds))},x=Object(i.a)({redBg:{background:"red"},whiteBg:{}}),C=function(){var e=x(),t=Object(a.useState)(90),n=Object(s.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(r),h=Object(s.a)(i,2),E=h[0],g=h[1],v=Object(a.useRef)(E),y=Object(a.useState)(0),k=Object(s.a)(y,2),C=k[0],B=k[1],I=Object(a.useState)(!1),W=Object(s.a)(I,2),M=W[0],R=W[1],T={color:"primary",name:"start"},A={color:"default",name:"stop"},D=Object(a.useState)({color:"primary",name:"start"}),L=Object(s.a)(D,2),N=L[0],P=L[1],z=Object(a.useState)(!0),J=Object(s.a)(z,2),K=J[0],V=J[1],$=Object(a.useState)(!0),q=Object(s.a)($,2),F=q[0],G=q[1],H=c.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/start.mp3")),Q=Object(s.a)(H,1)[0],U=c.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/cannon.mp3")),X=Object(s.a)(U,1)[0];Object(a.useEffect)((function(){v.current=E,0===E&&(X.play(),window.clearInterval(C))}),[E]);var Y=function(){B(window.setInterval(_,1e3)),E===r&&Q.play()},Z=function(){window.clearInterval(C)},_=function(){v.current>0&&g(v.current-1)};return c.a.createElement(u.a,{container:!0,justify:"center",spacing:2},c.a.createElement(u.a,{item:!0,xs:!0,md:5},c.a.createElement(l.a,{className:0===E?e.redBg:e.whiteBg,color:"primary",elevation:4},c.a.createElement(u.a,{container:!0},c.a.createElement(u.a,{item:!0,xs:11},c.a.createElement(m.a,{ml:"5vw"},c.a.createElement(S,{seconds:E,isResetState:F}))),c.a.createElement(u.a,{item:!0,xs:1},c.a.createElement(u.a,{container:!0},c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(m.a,{mt:1},c.a.createElement(d.a,{color:F?"secondary":"primary",edge:"start",onClick:function(){F&&o(r>3570?3599:r+30),g(E>3570?3599:E+30)}},c.a.createElement(b.a,null)))),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(d.a,{color:F?"secondary":"primary",edge:"start",onClick:function(){F&&o(r<30?0:r-30),g(E<30?0:E-30)}},c.a.createElement(p.a,null)))))))),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(u.a,{container:!0,justify:"center",spacing:2},c.a.createElement(m.a,{mr:"1vw",mt:"3vh"},c.a.createElement(f.a,{size:"large",variant:"contained",color:N.color,startIcon:M?c.a.createElement(w.a,null):c.a.createElement(j.a,null),onClick:function(){M?(Z(),R(!1),P(T),V(!0)):(Y(),R(!0),P(A),V(!1),G(!1))}},N.name)),c.a.createElement(m.a,{ml:"1vw",mt:"3vh"},c.a.createElement(f.a,{size:"large",variant:"contained",color:"secondary",startIcon:c.a.createElement(O.a,null),disabled:!K,onClick:function(){g(r),window.clearInterval(C),G(!0)}},"Reset")))))},B=n(45),I=n.n(B),W=n(46),M=n.n(W),R=n(47),T=n.n(R),A=n(43),D=n(44),L=new(function(){function e(){var t=this;Object(A.a)(this,e),this.host="wss://fivebomber.herokuapp.com",this.socket=new WebSocket(this.host),this.onMessages=[],this.init=function(){var e=new WebSocket(t.host);e.onopen=function(){console.log("open!!!");var n=t.socket;t.socket=e,n.onclose=function(){},n.close()},e.onmessage=function(e){console.log(e.data),t.onMessages.forEach((function(t){return t(e)}))},e.onclose=function(){console.log("closed!!!"),t.init()}},this.init(),setInterval((function(){t.init()}),2e4)}return Object(D.a)(e,[{key:"addOnMessage",value:function(e){var t=this;this.onMessages.push(e),this.socket.onmessage=function(e){t.onMessages.forEach((function(t){return t(e)}))}}},{key:"send",value:function(e){this.socket.send(e)}}]),e}()),N=function(){var e=c.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/correct.mp3")),t=Object(s.a)(e,1)[0],n=c.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/wrong.mp3")),r=Object(s.a)(n,1)[0],o=c.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/success.mp3")),i=Object(s.a)(o,1)[0],l=[{key:"correct",sound:t},{key:"wrong",sound:r},{key:"success",sound:i}],f=Object(a.useContext)(Q),h=Object(a.useRef)(f);Object(a.useEffect)((function(){h.current=f}),[f]),Object(a.useEffect)((function(){L.addOnMessage((function(e){var t=e.data;l.forEach((function(e){t.startsWith("sound-"+e.key)&&(t.endsWith(h.current)||e.sound.play())}))}))}));Object(a.useEffect)((function(){document.body.addEventListener("keydown",(function(e){","===e.key&&(t.play(),b()),"."===e.key&&(r.play(),E()),"/"===e.key&&(i.play(),p())}))}),[]);var b=function(){L.send("sound-correct:"+h.current)},E=function(){L.send("sound-wrong:"+h.current)},p=function(){L.send("sound-success:"+h.current)};return c.a.createElement("div",null,c.a.createElement(m.a,{mt:3},c.a.createElement(u.a,{container:!0,justify:"center"},c.a.createElement(d.a,{onClick:function(){t.play(),b()}},c.a.createElement(I.a,null)),c.a.createElement(d.a,{onClick:function(){r.play(),E()}},c.a.createElement(M.a,null)),c.a.createElement(d.a,{onClick:function(){i.play(),p()}},c.a.createElement(T.a,null)))))},P=n(49),z=n(87),J=n(88),K=n(92),V=n(89),$=Object(i.a)({chatform:{outline:"none",marginLeft:"10px",marginRight:"10px",marginTop:"10px",padding:"10px 10px 10px 5px",display:"block",height:"10px",width:"85%",border:"none",borderBottom:"1px solid #757575 ",backgroundColor:"#f4f4f4",BorderRadius:"30px"}}),q=function(){var e=$(),t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)([]),l=Object(s.a)(i,2),d=l[0],f=l[1],h=Object(a.useRef)(d),b=Object(a.useContext)(Q);Object(a.useEffect)((function(){L.addOnMessage((function(e){var t=e.data,n="";t.startsWith("sound-correct")&&(n="Correct!!"),t.startsWith("sound-wrong")&&(n="Wrong!!"),t.startsWith("sound-success")&&(n="Congratulations!!"),t.startsWith("chat:")&&(n=t.split(":")[2]);var a=t.split(":")[1],c=new Date,r=0===h.current.length?0:h.current[0].id+1;f([{id:r,time:c.toLocaleString(),userId:a,msg:n}].concat(Object(P.a)(h.current)))}))}),[]),Object(a.useEffect)((function(){h.current=d}),[d]);return c.a.createElement("div",null,c.a.createElement(u.a,{container:!0,justify:"flex-end"},c.a.createElement(u.a,{item:!0,xs:4},c.a.createElement(z.a,{variant:"outlined"},c.a.createElement("input",{type:"text",name:"Post",className:e.chatform,onKeyDown:function(e){!function(e){var t=0===r.length;"Enter"===e.key&&e.shiftKey&&!t&&(console.log(b),L.send("chat:"+b+":"+r),o(""))}(e)},value:r,onChange:function(e){o(e.target.value)}}),c.a.createElement(J.a,null,d.map((function(e){return c.a.createElement(m.a,{mt:-1,mb:-2,key:e.id},c.a.createElement(K.a,null,c.a.createElement(V.a,{primary:e.msg,secondary:e.time+" ID:"+e.userId.slice(0,6)})))})),c.a.createElement(m.a,{mt:-1,mb:-2},c.a.createElement(K.a,null,c.a.createElement(V.a,{primary:"Press Shift+Enter"}))))))))},F=n(48),G=n.n(F),H=Object(i.a)({app:{padding:"2vh"}}),Q=Object(a.createContext)("0"),U=function(){var e=H(),t=Object(a.useState)(Math.random().toString()),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){setTimeout((function(){G.a.getV18((function(e,t){o(e)}))}),500)}),[]),c.a.createElement("div",{className:e.app},c.a.createElement(Q.Provider,{value:r},c.a.createElement(C,null),c.a.createElement(N,null),c.a.createElement(q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.9b43efdb.chunk.js.map