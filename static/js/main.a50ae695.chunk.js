(this["webpackJsonpts-react"]=this["webpackJsonpts-react"]||[]).push([[0],{61:function(e,t,n){e.exports=n(73)},66:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),s=(n(66),n(7)),i=n(88),u=n(95),l=n(89),m=n(96),d=n(76),f=n(90),b=n(91),h=n(43),E=n.n(h),p=n(44),g=n.n(p),j=n(46),O=n.n(j),v=n(47),y=n.n(v),w=n(45),k=n.n(w),S=(n(27),n(34)),x=function(e){return r.a.createElement(S.a,{align:"center",color:e.isResetState?"secondary":"primary",variant:"h1"},function(e){var t=Math.floor(e/60),n=e%60,a=t.toString(),r=n.toString();return t<10&&(a="0"+a),n<10&&(r="0"+r),a+":"+r}(e.seconds))},W=n(41),I=n(42),C=new(function(){function e(){var t=this;Object(W.a)(this,e),this.host="wss://fivebomber.herokuapp.com",this.socket=new WebSocket(this.host),this.onMessages=[],this.init=function(){var e=new WebSocket(t.host);e.onopen=function(){console.log("open!!!");var n=t.socket;t.socket=e,n.onclose=function(){},n.close()},e.onmessage=function(e){console.log(e.data),t.onMessages.forEach((function(t){return t(e)}))},e.onclose=function(){console.log("closed!!!"),t.init()}},this.init(),setInterval((function(){t.init()}),2e4)}return Object(I.a)(e,[{key:"addOnMessage",value:function(e){var t=this;this.onMessages.push(e),this.socket.onmessage=function(e){t.onMessages.forEach((function(t){return t(e)}))}}},{key:"send",value:function(e){this.socket.send(e)}}]),e}()),B=Object(i.a)({redBg:{background:"red"},whiteBg:{}}),T=function(){var e=B(),t=Object(a.useState)(90),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useRef)(c),m=Object(a.useState)(c),h=Object(s.a)(m,2),p=h[0],j=h[1],v=Object(a.useRef)(p),w=Object(a.useState)(0),S=Object(s.a)(w,2),W=S[0],I=S[1],T=Object(a.useRef)(W),M=Object(a.useState)(!1),R=Object(s.a)(M,2),A=R[0],D=R[1],L={color:"primary",name:"start"},N={color:"default",name:"stop"},P=Object(a.useState)({color:"primary",name:"start"}),z=Object(s.a)(P,2),J=z[0],K=z[1],V=Object(a.useState)(!0),$=Object(s.a)(V,2),q=$[0],F=$[1],G=Object(a.useState)(!0),H=Object(s.a)(G,2),Q=H[0],U=H[1],X=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/start.mp3")),Y=Object(s.a)(X,1)[0],Z=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/cannon.mp3")),ee=Object(s.a)(Z,1)[0],te=Object(a.useContext)(_).userId,ne=Object(a.useRef)(te),ae=Object(a.useContext)(_).volume;Object(a.useEffect)((function(){v.current=p,0===p&&(ee.play(),window.clearInterval(T.current))}),[p]),Object(a.useEffect)((function(){ne.current=te}),[te]),Object(a.useEffect)((function(){Y.volume=.01*ae,ee.volume=.01*ae}),[ae]),Object(a.useEffect)((function(){i.current=c}),[c]),Object(a.useEffect)((function(){T.current=W}),[W]),Object(a.useEffect)((function(){C.addOnMessage((function(e){console.log("addOnMessage");var t=e.data;if(console.log(t),t.split(":")[1]!==ne.current&&(t.startsWith("timer-start")&&ce(),t.startsWith("timer-stop")&&oe(),t.startsWith("timer-reset")&&ie(),t.startsWith("timer-increase")&&ue(),t.startsWith("timer-decrease")&&le(),t.startsWith("timer-sync"))){console.log("recieve timer sync");var n=t.split(":")[2];j(parseInt(n.split("-")[0])),o(parseInt(n.split("-")[1])),"true"===n.split("-")[2]?ce():(oe(),v.current===i.current?U(!0):U(!1))}}))}),[]);var re=function(){var e=":"+v.current+"-"+i.current+"-"+A.toString();C.send("timer-sync:"+ne.current+e)},ce=function(){console.log("startTimer"),window.clearInterval(T.current),I(window.setInterval(se,1e3)),v.current===i.current&&Y.play(),D(!0),K(N),F(!1),U(!1)},oe=function(){window.clearInterval(T.current),D(!1),K(L),F(!0)},se=function(){v.current>0&&j(v.current-1)},ie=function(){j(i.current),window.clearInterval(T.current),U(!0)},ue=function(){Q&&(i.current>3570?o(3599):o(i.current+30)),v.current>3570?j(3599):j(v.current+30)},le=function(){Q&&(i.current<30?o(0):o(i.current-30)),v.current<30?j(0):j(v.current-30)};return r.a.createElement(l.a,{container:!0,justify:"center",spacing:2},r.a.createElement(l.a,{item:!0,xs:!0,md:5},r.a.createElement(d.a,{className:0===p?e.redBg:e.whiteBg,color:"primary",elevation:4},r.a.createElement(l.a,{container:!0},r.a.createElement(l.a,{item:!0,xs:11},r.a.createElement(u.a,{ml:"5vw"},r.a.createElement(x,{seconds:p,isResetState:Q}))),r.a.createElement(l.a,{item:!0,xs:1},r.a.createElement(l.a,{container:!0},r.a.createElement(l.a,{item:!0,xs:12},r.a.createElement(u.a,{mt:1},r.a.createElement(f.a,{color:Q?"secondary":"primary",edge:"start",onClick:function(){re(),ue(),C.send("timer-increase:"+ne.current)}},r.a.createElement(E.a,null)))),r.a.createElement(l.a,{item:!0,xs:12},r.a.createElement(f.a,{color:Q?"secondary":"primary",edge:"start",onClick:function(){re(),le(),C.send("timer-decrease:"+ne.current)}},r.a.createElement(g.a,null)))))))),r.a.createElement(l.a,{item:!0,xs:12},r.a.createElement(l.a,{container:!0,justify:"center",spacing:2},r.a.createElement(u.a,{mr:"1vw",mt:"3vh"},r.a.createElement(b.a,{size:"large",variant:"contained",color:J.color,startIcon:A?r.a.createElement(k.a,null):r.a.createElement(O.a,null),onClick:function(){re(),A?(oe(),C.send("timer-stop:"+ne.current)):(ce(),C.send("timer-start:"+ne.current))}},J.name)),r.a.createElement(u.a,{ml:"1vw",mt:"3vh"},r.a.createElement(b.a,{size:"large",variant:"contained",color:"secondary",startIcon:r.a.createElement(y.a,null),disabled:!q,onClick:function(){re(),ie(),C.send("timer-reset:"+ne.current)}},"Reset")))))},M=n(53),R=n.n(M),A=n(52),D=n.n(A),L=n(48),N=n.n(L),P=n(49),z=n.n(P),J=n(50),K=n.n(J),V=function(){var e=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/correct.mp3")),t=Object(s.a)(e,1)[0],n=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/wrong.mp3")),c=Object(s.a)(n,1)[0],o=r.a.useState(new Audio("https://raw.githubusercontent.com/shuto410/5BomberTimer/master/audio/success.mp3")),i=Object(s.a)(o,1)[0],m=[{key:"correct",sound:t},{key:"wrong",sound:c},{key:"success",sound:i}],d=Object(a.useContext)(_).userId,b=Object(a.useRef)(d),h=Object(a.useContext)(_).volume;Object(a.useEffect)((function(){b.current=d}),[d]),Object(a.useEffect)((function(){t.volume=.01*h,c.volume=.01*h,i.volume=.01*h}),[h]),Object(a.useEffect)((function(){C.addOnMessage((function(e){var t=e.data;m.forEach((function(e){t.startsWith("sound-"+e.key)&&(t.endsWith(b.current)||e.sound.play())}))}))})),Object(a.useEffect)((function(){document.body.addEventListener("keydown",(function(e){","===e.key&&(t.play(),E()),"."===e.key&&(c.play(),p()),"/"===e.key&&(i.play(),g())}))}),[]);var E=function(){C.send("sound-correct:"+b.current)},p=function(){C.send("sound-wrong:"+b.current)},g=function(){C.send("sound-success:"+b.current)};return r.a.createElement("div",null,r.a.createElement(u.a,{mt:3},r.a.createElement(l.a,{container:!0,justify:"center"},r.a.createElement(f.a,{onClick:function(){t.play(),E()}},r.a.createElement(N.a,null)),r.a.createElement(f.a,{onClick:function(){c.play(),p()}},r.a.createElement(z.a,null)),r.a.createElement(f.a,{onClick:function(){i.play(),g()}},r.a.createElement(K.a,null)))))},$=n(54),q=n(92),F=n(93),G=n(97),H=n(94),Q=Object(i.a)({chatform:{outline:"none",marginLeft:"10px",marginRight:"10px",marginTop:"10px",padding:"10px 10px 10px 5px",display:"block",height:"10px",width:"85%",border:"none",borderBottom:"1px solid #757575 ",backgroundColor:"#f4f4f4",BorderRadius:"30px"}}),U=function(){var e=Q(),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),m=Object(s.a)(i,2),d=m[0],f=m[1],b=Object(a.useRef)(d),h=Object(a.useContext)(_).userId;Object(a.useEffect)((function(){C.addOnMessage((function(e){var t=e.data,n="";if(t.startsWith("sound-correct")&&(n="Correct!!"),t.startsWith("sound-wrong")&&(n="Wrong!!"),t.startsWith("sound-success")&&(n="Congratulations!!"),t.startsWith("timer-start")&&(n="Timer Start"),t.startsWith("timer-stop")&&(n="Timer Stop"),t.startsWith("timer-reset")&&(n="Timer Reset"),t.startsWith("timer-increase")&&(n="Timer Increase"),t.startsWith("timer-decrease")&&(n="Timer Decrease"),!t.startsWith("timer-sync")){t.startsWith("chat:")&&(n=t.split(":")[2]);var a=t.split(":")[1],r=new Date,c=0===b.current.length?0:b.current[0].id+1;f([{id:c,time:r.toLocaleString(),userId:a,msg:n}].concat(Object($.a)(b.current)))}}))}),[]),Object(a.useEffect)((function(){b.current=d}),[d]);return r.a.createElement("div",null,r.a.createElement(l.a,{container:!0,justify:"flex-end"},r.a.createElement(l.a,{item:!0,xs:8,sm:5,md:3},r.a.createElement(q.a,{variant:"outlined"},r.a.createElement("input",{type:"text",name:"Post",className:e.chatform,onKeyDown:function(e){!function(e){var t=0===c.length;"Enter"===e.key&&e.shiftKey&&!t&&(console.log(h),C.send("chat:"+h+":"+c),o(""))}(e)},value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement(F.a,null,d.map((function(e){return r.a.createElement(u.a,{mt:-1,mb:-2,key:e.id},r.a.createElement(G.a,null,r.a.createElement(H.a,{primary:e.msg,secondary:e.time+" ID:"+e.userId.slice(0,6)})))})),r.a.createElement(u.a,{mt:-1,mb:-2},r.a.createElement(G.a,null,r.a.createElement(H.a,{primary:"Press Shift+Enter"}))))))))},X=n(51),Y=n.n(X),Z=Object(i.a)({app:{padding:"2vh"}}),_=Object(a.createContext)({userId:"0",volume:50}),ee=function(){var e=Z(),t=Object(a.useState)(Math.random().toString()),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(50),d=Object(s.a)(i,2),f=d[0],b=d[1];Object(a.useEffect)((function(){setTimeout((function(){Y.a.getV18((function(e,t){o(e)}))}),500)}),[]);return r.a.createElement("div",{className:e.app},r.a.createElement(_.Provider,{value:{userId:c,volume:f}},r.a.createElement(T,null),r.a.createElement(V,null),r.a.createElement(u.a,{mt:0,mb:0},r.a.createElement(l.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(l.a,{item:!0},r.a.createElement(D.a,null)),r.a.createElement(l.a,{item:!0,xs:3},r.a.createElement(m.a,{value:f,onChange:function(e,t){b(t),console.log(f)},"aria-labelledby":"continuous-slider"})),r.a.createElement(l.a,{item:!0},r.a.createElement(R.a,null)))),r.a.createElement(U,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.a50ae695.chunk.js.map